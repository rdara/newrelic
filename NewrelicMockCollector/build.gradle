application {
    mainClass = 'pers.rdara.examples.DummyApplication'
}

run {
    dependsOn tasks.findByName('unzipNewRelic')

    jvmArgs "-javaagent:${newRelicAgentJarPath}"

    systemProperties = [
            "mock.collector.http.port": mockCollectorHttpPort,
            "mock.collector.https.port": mockCollectorHttpsPort,
            "newrelic.config.license_key": "dummy",

            //Mock collector settings and none of these required when you have a valid newrelic license key
            "newrelic.config.host": "localhost",
            "newrelic.config.port": mockCollectorHttpsPort,
            "newrelic.config.metric_ingest_uri": "https://localhost:${mockCollectorHttpsPort}",
            "newrelic.config.event_ingest_uri": "https://localhost:${mockCollectorHttpsPort}",
            "newrelic.config.ca_bundle_path": "${rootDir}/NewrelicMockCollector/src/main/resources/server.cer",

            //Newrelic Logging
            "newrelic.config.application_logging.local_decorating.enabled": true
    ]
}
